import{k as A,o as f,e as P,s as k,$ as n,p as B,l as L,m as q,h as x,n as F}from"./index.d7137ea8.js";var _={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function b(l){return l.replace(RegExp("^"+(l.match(/^(\t| )+/)||"")[0],"gm"),"")}function v(l){return(l+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function C(l,r){var t,o,e,m,a,h=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,u=[],p="",d=r||{},g=0;function $(s){var c=_[s[1]||""],i=u[u.length-1]==s;return c?c[1]?(i?u.pop():u.push(s),c[0|i]):c[0]:s}function y(){for(var s="";u.length;)s+=$(u[u.length-1]);return s}for(l=l.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(s,c,i){return d[c.toLowerCase()]=i,""}).replace(/^\n+|\n+$/g,"");e=h.exec(l);)o=l.substring(g,e.index),g=h.lastIndex,t=e[0],o.match(/[^\\](\\\\)*\\$/)||((a=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+b(v(a).replace(/^\n+|\n+$/g,""))+"</code></pre>":(a=e[6])?(a.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),m=C(b(e[5].replace(/^\s*[>*+.-]/gm,""))),a==">"?a="blockquote":(a=a.match(/\./)?"ol":"ul",m=m.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+a+">"+m+"</"+a+">"):e[8]?t='<img src="'+v(e[8])+'" alt="'+v(e[7])+'">':e[10]?(p=p.replace("<a>",'<a href="'+v(e[11]||d[o.toLowerCase()])+'">'),t=y()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(a="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+C(e[12]||e[15],d)+"</"+a+">":e[16]?t="<code>"+v(e[16])+"</code>":(e[17]||e[1])&&(t=$(e[17]||"--"))),p+=o,p+=t;return(p+l.substring(g)+y()).replace(/^\n+|\n+$/g,"")}function D({gv:l}){const r=A(l),[t,o]=f({}),[e,m]=f([]),[a,h]=f(""),[u,p]=f(""),d=P({}),[g,$]=f(!1);k(()=>{const s=x(r),c=F(r);Promise.all([s,c]).then(([i,N])=>{o(i.result);const w=E(i.result.videos||"");m(w),w.length>0&&h(w[0][1]),p(N.result.pv),d.current.innerHTML=C(i.result.content)})},[]);const y=s=>{h(e[s][1])};return n("main",null,n("div",{class:"wrap player"},n("div",{className:"ep-wrap"},n(S,{url:a})),n("div",{className:"p"},n("div",{className:"avatar"},n("img",{src:L(t.uqq),alt:""}),n("p",null,t.uname)),n("ul",null,e.map((s,c)=>n("li",{onClick:()=>y(c)},c))))),n("div",{className:"info"},n("h1",null,t.title),n("div",{className:"tag"},n("p",null,u," \u2103"),n("div",{className:"tags"},t.tag&&t.tag.split(" ").filter(s=>s.length>0).map(s=>n("li",null,s)),n("li",{onclick:()=>$(!g)},"\u5C55\u5F00\u8BE6\u60C5 ",g?"\u2BC5":"\u2BC6"),n("li",{onclick:()=>B(`/upload/${r}`)},"\u7F16\u8F91\u7A3F\u5B50 \u2BC8"))),n("article",{ref:d,style:{display:g?"block":"none"}})))}function E(l){return l.split(`
`).map(r=>r.split("$")).filter(r=>r.length>0&&r[1]!=null)}function S(l){const r=P(null);return k(()=>{q(`https://www.clicli.cc/play?url=${l.url}`).then(t=>{const o=t.result.mtype==="m3u8"?"hls":t.result.mtype;r.current.setAttribute("type",o),r.current.setAttribute("src",t.result.url)})},[l.url]),n("e-player",{ref:r,class:"ep"})}export{S as Eplayer,D as default};
